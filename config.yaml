# Wi-Lab Configuration File
# 
# This file defines WiFi Access Point networks and global settings.
# All comments provide detailed guidance for each parameter.
#
# IMPORTANT: Review and update parameters before starting Wi-Lab!

# ==============================================================================
# API AUTHENTICATION
# ==============================================================================

# Bearer token for REST API authentication
# This token must be sent with every API request (except /health endpoint)
# 
# SECURITY: Change this to a strong token!
# Generate a secure token with: python3 -c 'import secrets; print(secrets.token_urlsafe(32))'
auth_token: "secret-token-12345"

# ==============================================================================
# API SERVER
# ==============================================================================

# Port for REST API server
# API will be available at: http://localhost:8080
# Swagger UI docs at: http://localhost:8080/docs
api_port: 8080

# CORS allowed origins (for frontend development)

# If the field is not specified or empty (all entries are commented), 
# CORS is disabled (secure for production).
# For development with Angular frontend, uncomment and configure:
cors_origins:
  - "http://localhost:4200"           # Angular server - default
  # - "http://10.206.94.26:4200"        # Angular - Furio PC
  # - "http://localhost:80"               # Production frontend (if served separately)
# 

# SECURITY: Only add trusted origins! Leaving this commented disables CORS (recommended for production)

# ==============================================================================
# NETWORK TIMEOUTS
# ==============================================================================

# Default network lifetime in seconds
# When a WiFi network is created, it will automatically stop after this duration
# unless explicitly extended
# Examples:
#   - 600 = 10 minutes (quick testing)
#   - 3600 = 1 hour (typical session)
#   - 86400 = 24 hours (long-running lab)
default_timeout: 3600

# Maximum allowed timeout (upper bound for API requests)
# This is the default maximum timeout value used in the application.
# API requests with timeout > max_timeout will be rejected.
# Set to 24 hours (86400 seconds) by default.
max_timeout: 86400

# Minimum allowed timeout (lower bound for API requests)
# This is the default minimum timeout value used in the application.
# API requests with timeout < min_timeout will be rejected.
# Set to 60 seconds by default.
min_timeout: 60

# ==============================================================================
# DHCP & NETWORKING
# ==============================================================================

# Base CIDR network for WiFi client DHCP allocation
# Wi-Lab assigns sequential subnets to each WiFi network:
#   1st network: 192.168.120.0/24 (gateway: .1, DHCP: .10-.250)
#   2nd network: 192.168.121.0/24 (gateway: .1, DHCP: .10-.250)
#   3rd network: 192.168.122.0/24 (gateway: .1, DHCP: .10-.250)
#
# *** CRITICAL: Verify this subnet does NOT conflict with your host network! ***
# Check your host network: ip addr show | grep "inet "
# Example:
#   - If host is on 192.168.10.x: use 192.168.120.0/24 for WiFi ✅
#   - If host is on 192.168.10.x: DON'T use 192.168.10.0/24 for WiFi ❌
# Subnet conflict can BLOCK SSH access!
dhcp_base_network: "192.168.120.0/24"

# Upstream interface for Internet access (NAT forwarding)
# This interface must have Internet access
# Options:
#   - "auto": Auto-detect via default gateway (RECOMMENDED - usually works)
#   - "eth0", "ens18", etc.: Force specific interface by name
upstream_interface: "auto"

# DNS server IP address for WiFi clients
# Clients will use this DNS for domain resolution
# Options:
#   - Use your local gateway: "192.168.10.1"
#   - Use local DNS server: "192.168.10.21"
#   - Use public DNS: "8.8.8.8" (not recommended in isolated labs)
dns_server: "192.168.10.21"

# Whether to enable Internet access by default for new networks
# - true: Clients can reach external networks (NAT enabled)
# - false: Clients isolated (no Internet access)
# Can be overridden per-network via API
internet_enabled_by_default: true

# ==============================================================================
# MANAGED WiFi NETWORKS
# ==============================================================================

# List of WiFi interfaces managed by Wi-Lab
# Each interface can run ONE WiFi network at a time
# 
# Parameters:
#   - net_id: Unique network identifier (stable across restarts)
#             Allowed: lowercase letters, digits, dashes
#             Format: must match ^[a-z0-9-]{1,16}$
#             Examples: "ap-01", "lab-1", "test-network"
#
#   - interface: WiFi interface name to use for this network
#                Find available interfaces: iw dev
#                Names: wlan0, wlx782051245264, etc.
#
#   - subnet: (optional) Custom CIDR for DHCP allocation
#             If omitted: auto-calculated from dhcp_base_network + index
#             Example: "192.168.20.0/24"
#             If specified: ensure it doesn't conflict with other networks or host
#
# At runtime, WiFi parameters (SSID, channel, band, encryption, password, hidden, 
# timeout, tx_power_level) are provided via REST API when creating a network.
# See docs/swagger.md for API endpoint documentation.
#
# TX Power Level: Mandatory at network creation (1-4 scale)
#   1 = Minimum power (~5 dBm)
#   2 = Low power (~10 dBm)
#   3 = Medium power (~15 dBm)
#   4 = Maximum power (~20 dBm)
# Actual dBm values depend on WiFi interface capabilities.
networks:
  - net_id: "ap-01"
    interface: "wlx782051245264"
    # subnet: "192.168.120.0/24"  # Optional: uncomment to use custom subnet

  - net_id: "ap-02"
    interface: "wls16"
    # subnet: "192.168.121.0/24"  # Optional: uncomment to use custom subnet

# Uncomment additional networks as needed:
# - net_id: "ap-03"
#   interface: "wlan1"

# ==============================================================================
# DOCUMENTATION & REFERENCES
# ==============================================================================

# For complete configuration guidance:
#   Installation: docs/installation-guide.md
#   API Reference: docs/swagger.md
#   Networking: docs/networking.md
#   Troubleshooting: docs/troubleshooting.md
#
# For WiFi interface discovery:
#   List interfaces: iw dev
#   Check AP mode support: iw list | grep -A 5 "Supported interface modes"
#   Find interface name: iw dev (look for "Interface wlx..." lines)

